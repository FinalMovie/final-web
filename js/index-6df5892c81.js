webpackJsonp([0],[function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1);o.n(i);window.onload=function(){var t,e,o=document.getElementById("canvas"),s=new i.RenderCanvas({target:o,w:document.documentElement.clientWidth,h:document.documentElement.clientHeight,zoomMax:2,unabledArr:[[0,0],[5,8]]});s.init(),o.addEventListener("touchstart",function(t){var e=o.getBoundingClientRect().left,i=o.getBoundingClientRect().top,c=s.touchPos,l=t.touches;1===l.length?(s.starttime=+new Date,c.clickX=t.touches[0].clientX-e,c.clickY=t.touches[0].clientY-i):2===l.length&&(s.isZoom=!0,c.touches[0].startX=l[0].clientX-e,c.touches[1].startX=l[1].clientX-e,c.touches[0].startY=l[0].clientX-i,c.touches[1].startY=l[1].clientY-i)},!1),o.addEventListener("touchmove",function(i){i.preventDefault();var c=s.touchPos,l=i.touches;if(2===l.length){var n=l[0].clientX-c.touches[0].startX,a=l[1].clientX-c.touches[1].startX,r=l[0].clientY-c.touches[0].startY,h=l[1].clientY-c.touches[1].startY,m=c.touches[0].startX-c.touches[1].startX,u=c.touches[0].startY-c.touches[1].startY,d=Math.pow(Math.pow(a-n,2)+Math.pow(h-r,2),.5)/o.width;m>=0&&u>=0?n>=0&&a<=0||r>=0&&h<=0?(s.s=1+d,s.zoomType="max"):(n<=0&&a>=0||r<=0&&h>=0)&&(s.s=1-d,s.zoomType="min"):m>0&&u<0?n>=0&&a<=0||r<=0&&h>=0?(s.s=1+d,s.zoomType="max"):(n>=0&&a<=0||r>=0&&h<=0)&&(s.s=1-d,s.zoomType="min"):m<0&&u<0?n<=0&&a>=0||r<=0&&h>=0?(s.s=1+d,s.zoomType="max"):(n>=0&&a<=0||r>=0&&h<=0)&&(s.s=1-d,s.zoomType="min"):m<0&&u>0&&(n<=0&&a>=0||r>=0&&h<=0?(s.s=1+d,s.zoomType="max"):(n<=0&&a>=0||r<=0&&h>=0)&&(s.s=1-d,s.zoomType="min")),s.s=s.s<s.zoomMin?s.zoomMin:s.s,s.s=s.s>s.zoomMax?s.zoomMax:s.s,s.update()}else 1===l.length&&(s.s>1&&!s.isClick?(t=i.touches[0].clientX-c.clickX,e=i.touches[0].clientY-c.clickY,c.mx=i.touches[0].clientX-c.clickX+c.mxt,c.my=i.touches[0].clientY-c.clickY+c.myt,s.update()):c.mx=c.my=0)},!1),o.addEventListener("touchend",function(){var o=s.touchPos;s.isZoom?(s.s="max"===s.zoomType?s.zoomMax:s.zoomMin,"min"===s.zoomType&&(o.mx=o.my=o.myt=o.mxt=0),s.update(),s.isZoom=!1):+new Date-s.starttime<150?(s.isClick=!0,s.update()):(o.mx=o.mxt=t,o.my=o.myt=e)},!1)}},function(t,e){function o(t){var e={starttime:+new Date,target:null,w:400,h:400,s:1,isClick:!1,isZoom:!1,zoomType:"max",zoomMax:1,zoomMin:1,selectedArr:[],unabledArr:[],defaultColor:"#ddd",selectedColor:"green",unabledColor:"red",strokeColor:"#000",limitNum:4,rowLen:10,colLen:10,touchPos:{clickX:0,clickY:0,mxt:0,myt:0,mx:0,my:0,touches:[{startX:0,startY:0},{startX:0,startY:0}]}},o=Object.assign({},e,t);for(var i in o.target.width=o.w,o.target.height=o.h,o.ctx=o.target.getContext("2d"),o.drawData=[],o)this[i]=o[i];return this}o.prototype.init=function(t){this.update()},o.prototype.update=function(t){var e=this.ctx,o=(this.drawData,this.w),i=this.h,s=this.rowLen,c=this.colLen,l=this.s,n=this.touchPos;e.clearRect(0,0,o,i),this.drawData=[];for(var a=0;a<s;a++)for(var r=0;r<c;r++)this.drawData.push({id:a+""+r,type:"rect",x:l*o/s*(r+.1)+n.mx,y:l*o/s*a+l*(i-o)/2+n.my,width:.8*l*o/s,height:.8*l*o/s}),this.draw({x:l*o/s*(r+.1)+n.mx,y:l*o/s*a+l*(i-o)/2+n.my,w:.8*l*o/s,h:.8*l*o/s,i:a,j:r})},o.prototype.draw=function(t){var e=t.x,o=t.y,i=t.w,s=t.h,c=t.i,l=t.j,n=this.strokeColor,a=this.selectedArr,r=this.unabledArr,h=this.defaultColor,m=this.selectedColor,u=this.unabledColor,d=this.touchPos,f=this.isClick,y=this.limitNum,p=d.clickX,x=d.clickY,k=this.ctx,w=h;k.save(),k.beginPath(),k.rect(e,o,i,s),k.fillStyle=w,k.strokeStyle=n,k.fill(),k.stroke(),k.closePath(),k.restore();for(var g=0;g<r.length;g++)if(r[g][0]===l&&r[g][1]===c){w=u,k.fillStyle=u,k.fill();break}if(w!==u)for(var v=0;v<a.length;v++)if(a[v][0]===l&&a[v][1]===c){w=m,k.fillStyle=w,k.fill();break}if(w!==u&&f&&k.isPointInPath(p,x)){for(var C=0;C<a.length;C++)if(a[C][0]===l&&a[C][1]===c){w=h,k.fillStyle=w,k.fill(),a.splice(C,1),this.isClick=!1;break}a.length<y&&this.isClick?(w=m,k.fillStyle=w,k.fill(),this.selectedArr.push([l,c]),this.isClick=!1):a.length>=y&&this.isClick&&(this.isClick=!1,alert("最多只能选"+y+"张票"))}},t.exports={RenderCanvas:o}}],[0]);